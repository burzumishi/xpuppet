#!/bin/bash

##########################################
#                                        # 
# XPuppet: Unix System Puppets           #
#                                        # 
# 2014 (c) @burzumishi [ Antonio Cao ]   # 
#                                        # 
##########################################

PUPPETCONF="/etc/xpuppet.conf";

if [ -f "$PUPPETCONF" ]; then . $PUPPETCONF; fi

PUPPETLIB="/usr/lib/libxpuppet.so";

if [ -f "$PUPPETLIB" ]; then . $PUPPETLIB; fi


##########################
#                        #
# Main ov_puppet routine #
#                        #
##########################

case $1 in
'addgroup') puppet_addgroup $2;
puppet_check_error $?;
;;
'addnode') puppet_addnode $2 $3;
puppet_check_error $?;
;;
'adddir') puppet_adddir $2 $3;
puppet_check_error $?;
;;
'addfile') puppet_addfile $2 $3 $4;
puppet_check_error $?;
;;
'delnode') puppet_delnode $2 $3;
puppet_check_error $?;
;;
'list') puppet_list $2 $3;
puppet_check_error $?;
;;
'update') puppet_update $2;
puppet_check_error $?;
;;
*) puppet_usage;
;;
esac

exit $true;
